{% load static %}
<!DOCTYPE html>
<html>
  <head>
    <link rel='stylesheet' href='//cdnjs.cloudflare.com/ajax/libs/fullcalendar/3.1.0/fullcalendar.css' />
    <link rel='stylesheet' href='{% static "styles.css" %}' />
    <link rel='stylesheet' href='{% static "cal/cal.css" %}' />
    <script src='//cdnjs.cloudflare.com/ajax/libs/jquery/3.1.1/jquery.min.js'></script>
    <script src='//cdnjs.cloudflare.com/ajax/libs/moment.js/2.17.1/moment.min.js'></script>
    <script src='//cdnjs.cloudflare.com/ajax/libs/fullcalendar/3.1.0/fullcalendar.js'></script>

    <script type="text/javascript">
    $(document).ready(function() {
		$('#calendar').fullCalendar({
      height: 'parent',
      nowIndicator: true,
			header: {
			  left: 'prev, next, today',
			  center: 'title', 
			  right: 'agendaWeek,agendaDay,month'
			},
			eventClick: function(calEvent, jsEvent, view) {
				var title = prompt("Update event title");
				calEvent.title = title;
				$('#calendar').fullCalendar('updateEvent', calEvent);
			},
			events: '/cal/get_event_feed', //Fetches events as a json feed from this url
			defaultView: 'agendaWeek',
			navLinks: true,
			selectable: true,
			selectHelper: true,
			select: function(start, end, jsEvent) {
				var title = prompt("Event Title");
				var eventData;
				if (title) {
					eventData = {
						title: title,
						start: start,
						end: end
					};
					$('#calendar').fullCalendar('renderEvent', eventData, true);
				}
				$('#calendar').fullCalendar('unselect');
			},
			editable: true,
			eventLimit: true,
		})
    });
    </script>
  </head>
  <body>
    <div class="box">
      <div class="row header">
        <form id="enter-class" class="form-add-class" name="enter-class" action=""> 
        <span class="form-signin-heading"> Enter a class (e.g., CS103):
          <input name="event_title" type="text" id="event_title" /> </span>
          <button class="small-button"  name="Submit" value="Enter" type="Submit">Add class</button> 
        </form>
      </div>

      <div class="row content">
        <div id='calendar'></div>
      </div>
    </div>
  </body>
</html>
